(function(){"use strict";var currentScrollTop=window.pageYOffset,oldScrollTop,$allWrappers=$(".img-wrapper"),$allImages=$(".img-wrapper img"),allImagesLength=$allImages.length,allImagesOffsets=[],$downArrow=$(".chevron-down"),scrollCoefficient=2.2,scrollTime=1e3,windowHeightReduced=$(window).height()/3;function getImageOffsets(){$allImages.each(function(){allImagesOffsets.push($(this).parent().offset().top)});windowHeightReduced=$(window).height()/3}function setImgScroll(currentScrollY){for(var i=0;i<allImagesLength;i+=1){var wrapper=$allWrappers[i],boundingRect=wrapper.getBoundingClientRect();if(boundingRect.bottom<0||boundingRect.top>window.innerHeight){continue}var image=$allImages[i],imgOffsetTop=allImagesOffsets[i],scrollHeightOfElement=currentScrollY-imgOffsetTop+(imgOffsetTop-currentScrollY)/scrollCoefficient;image.style.transform="translate3d(0px, "+scrollHeightOfElement+"px, 0px)"}}function fadeDownArrow(currentScrollY){if(!$downArrow.hasClass("animation-started")){return}var newOpacity=(windowHeightReduced-currentScrollY)/windowHeightReduced;newOpacity=newOpacity<0?0:newOpacity;$downArrow.css("opacity",newOpacity)}function animLoop(){currentScrollTop=window.pageYOffset;if(currentScrollTop!==oldScrollTop){setImgScroll(currentScrollTop);fadeDownArrow(currentScrollTop);oldScrollTop=currentScrollTop}requestAnimationFrame(animLoop)}function init(){requestAnimationFrame(animLoop);getImageOffsets();$('a[href*="#"]').not('[href="#"]').not('[href="#0"]').click(function(event){var pathEquivalent=location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,""),hostEquivalent=location.hostname===this.hostname;if(pathEquivalent&&hostEquivalent){var hash=this.hash,$target=$(hash);$target=$target.length?$target:$("[name="+this.hash.slice(1)+"]");if($target.length){event.preventDefault();$("html, body").animate({scrollTop:$target.offset().top},scrollTime,function(){location.hash=hash;$target.focus();if($target.is(":focus")){return false}else{$target.attr("tabindex","-1");$target.focus()}})}}})}$(window).resize(function(){getImageOffsets()});$downArrow.on("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",function(){$(this).css("animation","initial")});$downArrow.on("animationstart webkitAnimationStart oAnimationStart MSAnimationStart",function(){$(this).addClass("animation-started");fadeDownArrow(currentScrollTop)});window.addEventListener("mousewheel",function(){},{passive:true});init()})();
